<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Binary and continuous feature embedding â€¢ rsetse</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Binary and continuous feature embedding">
<meta property="og:description" content="rsetse">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rsetse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Binary-and-continuous-features.html">Binary and continuous feature embedding</a>
    </li>
    <li>
      <a href="../articles/separate-peels-quintet.html">Analysing multiple networks</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/JonnoB/rSETSe/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Binary-and-continuous-features_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="Binary-and-continuous-features_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="Binary-and-continuous-features_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Binary and continuous feature embedding</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JonnoB/rSETSe/blob/master/vignettes/Binary-and-continuous-features.Rmd"><code>vignettes/Binary-and-continuous-features.Rmd</code></a></small>
      <div class="hidden name"><code>Binary-and-continuous-features.Rmd</code></div>

    </div>

    
    
<div id="necessary-packages" class="section level1">
<h1 class="hasAnchor">
<a href="#necessary-packages" class="anchor"></a>Necessary packages</h1>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/JonnoB/rSETSe">rsetse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://igraph.org">igraph</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggraph.data-imaginist.com">ggraph</a></span><span class="op">)</span></pre></div>
<p>#Plot the data</p>
<p>The biconnected_network is a simple network constructed of two groups of nodes that are linked by a single edge. This means the network is made of 3 bi-connected components hence the name. For more information type <code><a href="../reference/biconnected_network.html">?biconnected_network</a></code></p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="va">biconnected_network</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_edge_link.html">geom_edge_link</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_point.html">geom_node_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">group</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> </pre></div>
<p><img src="Binary-and-continuous-features_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
</div>
<div id="continuous-embeddings" class="section level1">
<h1 class="hasAnchor">
<a href="#continuous-embeddings" class="anchor"></a>Continuous embeddings</h1>
<p>Creating the embeddings using this dataset is very simple as it already has a force variable and the edge weights can be used as the spring constant.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">embeddings_cont</span> <span class="op">&lt;-</span> <span class="va">biconnected_network</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/prepare_SETSe_continuous.html">prepare_SETSe_continuous</a></span><span class="op">(</span><span class="va">.</span>, node_names <span class="op">=</span> <span class="st">"name"</span>, force_var <span class="op">=</span> <span class="st">"force"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/SETSe_auto.html">SETSe_auto</a></span><span class="op">(</span><span class="va">.</span>, k <span class="op">=</span> <span class="st">"weight"</span><span class="op">)</span>


<span class="va">embeddings_data</span> <span class="op">&lt;-</span> <span class="va">biconnected_network</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/prepare_SETSe_continuous.html">prepare_SETSe_continuous</a></span><span class="op">(</span><span class="va">.</span>, node_names <span class="op">=</span> <span class="st">"name"</span>, force_var <span class="op">=</span> <span class="st">"force"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/SETSe_auto.html">SETSe_auto</a></span><span class="op">(</span><span class="va">.</span>, k <span class="op">=</span> <span class="st">"weight"</span><span class="op">)</span>

<span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_node_edge_df.html">create_node_edge_df</a></span><span class="op">(</span><span class="va">embeddings_data</span>, function_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"mode"</span>, <span class="st">"sum"</span><span class="op">)</span><span class="op">)</span></pre></div>
<p>However, for some reason we may want to reset the spring constant to something else, below we perform the embedding using a fixed k of 500.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">

<span class="va">embeddings_cont_fixed</span> <span class="op">&lt;-</span> <span class="va">biconnected_network</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/prepare_SETSe_continuous.html">prepare_SETSe_continuous</a></span><span class="op">(</span><span class="va">.</span>, node_names <span class="op">=</span> <span class="st">"name"</span>, force_var <span class="op">=</span> <span class="st">"force"</span>, k <span class="op">=</span> <span class="fl">500</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/SETSe_auto.html">SETSe_auto</a></span><span class="op">(</span><span class="va">.</span>, k <span class="op">=</span> <span class="st">"k"</span><span class="op">)</span></pre></div>
<div id="plot-the-resulting-embeddings" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-the-resulting-embeddings" class="anchor"></a>plot the resulting embeddings</h2>
<p>By aggregating the tension in each edge to node level using <code><a href="../reference/create_node_edge_df.html">create_node_edge_df()</a></code> for both the embeddings methods we can see how the different node are embedded. What we see is that the two most central node experience much more tension and also have a substantially higher elevation than the other nodes. This is expected as on the biconnected_network network the node force is the centrality of the nodes.</p>
<p>We can also see that the embeddings are similar but having fixed or variable k-strength has a clear impact on the final embeddings.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">

<span class="va">continuous_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="fu"><a href="../reference/create_node_edge_df.html">create_node_edge_df</a></span><span class="op">(</span><span class="va">embeddings_cont</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"variable k"</span><span class="op">)</span>,
          <span class="fu"><a href="../reference/create_node_edge_df.html">create_node_edge_df</a></span><span class="op">(</span><span class="va">embeddings_cont_fixed</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"fixed k"</span><span class="op">)</span>
 <span class="op">)</span> 

<span class="va">continuous_results</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">tension_mean</span>, y <span class="op">=</span> <span class="va">elevation</span>, colour <span class="op">=</span> <span class="va">node</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">type</span><span class="op">)</span>  <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">type</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Continuous embeddings"</span>,
       x <span class="op">=</span> <span class="st">"mean tension"</span><span class="op">)</span></pre></div>
<p><img src="Binary-and-continuous-features_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
</div>
<div id="binary-embeddings" class="section level1">
<h1 class="hasAnchor">
<a href="#binary-embeddings" class="anchor"></a>Binary embeddings</h1>
<p>Now we will use the group identity as binary force variable. The network is made up of two groups A and B. We arbitrarily set A to be the positive force.</p>
<p>As can be seen embeddings using the groups as force variables create very different embedded results, this is despite the fact that the networks are identical.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">

<span class="va">embeddings_binary</span> <span class="op">&lt;-</span> <span class="va">biconnected_network</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/prepare_SETSe_binary.html">prepare_SETSe_binary</a></span><span class="op">(</span><span class="va">.</span>, node_names <span class="op">=</span> <span class="st">"name"</span>, force_var <span class="op">=</span> <span class="st">"group"</span>, positive_value <span class="op">=</span> <span class="st">"A"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/SETSe_auto.html">SETSe_auto</a></span><span class="op">(</span><span class="va">.</span>, k <span class="op">=</span> <span class="st">"weight"</span><span class="op">)</span>


<span class="va">embeddings_binary_fixed</span> <span class="op">&lt;-</span> <span class="va">biconnected_network</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/prepare_SETSe_binary.html">prepare_SETSe_binary</a></span><span class="op">(</span><span class="va">.</span>, node_names <span class="op">=</span> <span class="st">"name"</span>, force_var <span class="op">=</span> <span class="st">"group"</span>, positive_value <span class="op">=</span> <span class="st">"A"</span>, k <span class="op">=</span> <span class="fl">500</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/SETSe_auto.html">SETSe_auto</a></span><span class="op">(</span><span class="va">.</span>, k <span class="op">=</span> <span class="st">"k"</span><span class="op">)</span>


<span class="va">binary_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="fu"><a href="../reference/create_node_edge_df.html">create_node_edge_df</a></span><span class="op">(</span><span class="va">embeddings_binary</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"variable k"</span><span class="op">)</span>,
          <span class="fu"><a href="../reference/create_node_edge_df.html">create_node_edge_df</a></span><span class="op">(</span><span class="va">embeddings_binary_fixed</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"fixed k"</span><span class="op">)</span>
 <span class="op">)</span> 

<span class="va">binary_results</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">tension_mean</span>, y <span class="op">=</span> <span class="va">elevation</span>, colour <span class="op">=</span> <span class="va">node</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">type</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Binary embeddings"</span>,
       x <span class="op">=</span> <span class="st">"mean tension"</span><span class="op">)</span></pre></div>
<p><img src="Binary-and-continuous-features_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
<div id="using-both-embeddings" class="section level1">
<h1 class="hasAnchor">
<a href="#using-both-embeddings" class="anchor"></a>Using both embeddings</h1>
<p>Because this network has two features both of them can be embedded. Currently the SETSe package only does single feature embedding. However we can combine these two different 1 dimensional feature embeddings and plot the results</p>
<p>What we see is that there is very little relationship between the elevation of a node when it is embedded using different features.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">continuous_results</span>, <span class="va">binary_results</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"node"</span>, <span class="st">"type"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">elevation.x</span>, y <span class="op">=</span> <span class="va">elevation.y</span>, colour <span class="op">=</span> <span class="va">node</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">type</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Node elevation for two different features"</span>,
       x <span class="op">=</span> <span class="st">"elevation with continuous embedding"</span>,
       y <span class="op">=</span> <span class="st">"elevation with binary embedding"</span><span class="op">)</span></pre></div>
<p><img src="Binary-and-continuous-features_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jonathan Bourne.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
