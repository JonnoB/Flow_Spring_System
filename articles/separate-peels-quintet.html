<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analysing multiple networks • rSETSe</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Analysing multiple networks">
<meta property="og:description" content="rSETSe">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rSETSe</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Binary-and-continuous-features.html">Binary and continuous feature embedding</a>
    </li>
    <li>
      <a href="../articles/separate-peels-quintet.html">Analysing multiple networks</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/JonnoB/rSETSe/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="separate-peels-quintet_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="separate-peels-quintet_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="separate-peels-quintet_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Analysing multiple networks</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JonnoB/rSETSe/blob/master/vignettes/separate-peels-quintet.Rmd"><code>vignettes/separate-peels-quintet.Rmd</code></a></small>
      <div class="hidden name"><code>separate-peels-quintet.Rmd</code></div>

    </div>

    
    
<div id="using-rsetse" class="section level1">
<h1 class="hasAnchor">
<a href="#using-rsetse" class="anchor"></a>Using rSETSe</h1>
<p>This vignette walks through a simple analysis shown in the paper The spring bounces back (arXiv:2007.09437), using 5 network classes known as Peels quintet (Peel et al 2018 doi.org/10.1073/pnas.1713019115). The purpose of the vignette is to show you how to go from a collection of networks to a plot summarising their final embeddings.</p>
</div>
<div id="setup" class="section level1">
<h1 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h1>
<p>The first block, shown below, loads all the necessary packages. use <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code> if any of the packages are not installed on your machine.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/JonnoB/rSETSe">rSETSe</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://purrr.tidyverse.org">purrr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggraph.data-imaginist.com">ggraph</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://igraph.org">igraph</a></span><span class="op">)</span></pre></div>
</div>
<div id="peels-quintet" class="section level1">
<h1 class="hasAnchor">
<a href="#peels-quintet" class="anchor"></a>Peel’s quintet</h1>
<p>Anscombe’s quartet which showed that figures that were visually very different could have almost identical corellation and other summary statistics. Peels quintet is the graph equivalent of Anscombes quartet but for graph/networks. The networks in Peel’s quintet have two groups of nodes which are broken up into two subgroups. All the networks have the same number of node, edges, connections within and between groups. However, the connections between subgroups change producing very different networks even though they appear identical using traditional network metrics (for more information see the paper by Peel et al).</p>
<p>the <code>rSETSe</code> package has a function that generates each of the 5 types of Peels network. The code chunk below shows 1 example of each class of the quintet starting with type A on the left and ending with thype E on the right. It is clear that networks</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="co">#This is a bit of a contorted way to get 5 networks into the same plot as </span>
<span class="co">#igraph::union does not also merge attributes</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1263</span><span class="op">)</span>
<span class="va">peels_networks</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="op">~</span><span class="fu"><a href="../reference/generate_peels_network.html">generate_peels_network</a></span><span class="op">(</span><span class="va">LETTERS</span><span class="op">[</span><span class="va">.x</span><span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span>
        <span class="co">#The nodes in all the networks are numbered 1:40, this line ensures</span>
        <span class="co">#each class has distinct node names</span>
        <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/set_vertex_attr.html">set.vertex.attribute</a></span><span class="op">(</span><span class="va">.</span>, <span class="st">"type"</span>, value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"type"</span>, <span class="va">LETTERS</span><span class="op">[</span><span class="va">.x</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
        <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/set_vertex_attr.html">set.vertex.attribute</a></span><span class="op">(</span><span class="va">.</span>, <span class="st">"name"</span>,
                             value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/vertex_attr.html">get.vertex.attribute</a></span><span class="op">(</span><span class="va">.</span>, <span class="st">"name"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span><span class="op">(</span><span class="va">.x</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fl">40</span><span class="op">)</span> <span class="op">%&gt;%</span>
      <span class="co">#The networks are going to be joined into a single network so need to be converted into a</span>
      <span class="co">#list of dataframes</span>
      <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/graph_from_data_frame.html">as_data_frame</a></span><span class="op">(</span><span class="va">.</span>, what <span class="op">=</span> <span class="st">"both"</span><span class="op">)</span>
      <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co">#the list is now two elements long and made up of a edge and vertex part</span>
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/transpose.html">transpose</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co">#join the elements from each part of the list into dataframes</span>
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="op">~</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="op">{</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/graph_from_data_frame.html">graph_from_data_frame</a></span><span class="op">(</span>d <span class="op">=</span> <span class="va">.</span><span class="op">$</span><span class="va">edges</span>, directed <span class="op">=</span> <span class="cn">FALSE</span>, vertices <span class="op">=</span> <span class="va">.</span><span class="op">$</span><span class="va">vertices</span><span class="op">)</span><span class="op">}</span>



<span class="fu"><a href="https://ggraph.data-imaginist.com/reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">peels_networks</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_edge_fan.html">geom_edge_fan</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_point.html">geom_node_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">class</span>, shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="va">sub_class</span><span class="op">)</span><span class="op">)</span>, size<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_shape_manual</a></span><span class="op">(</span>values<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">21</span>, <span class="fl">24</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"none"</span>, shape <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/facet_nodes.html">facet_nodes</a></span><span class="op">(</span><span class="op">~</span><span class="va">type</span>, scale <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span></pre></div>
<p><img src="separate-peels-quintet_files/figure-html/unnamed-chunk-3-1.png" width="700"> # Creating lots of networks</p>
<p>First we will generate 10 examples of each class of the Peel’s quintet.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">all_peels</span> <span class="op">&lt;-</span> <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="op">~</span><span class="op">{</span>
  
  <span class="va">peel_type</span> <span class="op">&lt;-</span> <span class="va">.x</span>
  
  <span class="va">out</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="op">~</span><span class="op">{</span>
    <span class="co">#Common with other node embeddings methods SETSe only works on a single connected component</span>
    <span class="co">#The below code ensures that the network created has a single component</span>
    <span class="va">num_components</span> <span class="op">&lt;-</span> <span class="fl">2</span>
    
    <span class="kw">while</span><span class="op">(</span><span class="va">num_components</span> <span class="op">&gt;</span><span class="fl">1</span><span class="op">)</span><span class="op">{</span>
      <span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_peels_network.html">generate_peels_network</a></span><span class="op">(</span><span class="va">peel_type</span><span class="op">)</span>
      <span class="va">num_components</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/components.html">components</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">no</span>
    <span class="op">}</span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
  
<span class="op">}</span><span class="op">)</span></pre></div>
<p>#Embedding lists of networks</p>
<p>Then we will embed all graphs in the list using SETSe_auto, however before the graph can be embedded they need to be prepared for SETSe using one of the SETSe preparation functions <code>prepare_SETSe_binary</code> or <code>prepare_SETSe_continuous</code>. The prime purpose of these functions make ensure that the force variable has a mean of 0, creates a spring constant k if necessary, creates the node distance variable. As the Peel’s quintet is a network of two node classes A and B we will use <code>prepare_SETSe_binary</code>.</p>
<p>Once the networks have been prepared they can be embedded. After embedding the graph type and id number is added on to the embeddings data to ensure we catagorise the graph easily.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">

<span class="co">#The first map cycles though each of the graph types from A to E</span>
<span class="va">all_embeddings</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="op">~</span><span class="op">{</span>

<span class="va">temp_list</span> <span class="op">&lt;-</span> <span class="va">all_peels</span><span class="op">[[</span><span class="va">.x</span><span class="op">]</span><span class="op">]</span>
  
<span class="va">node_type</span> <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span><span class="va">.x</span><span class="op">]</span>
<span class="co">#The inner map embeds each of the 10 networks of that type</span>
<span class="va">out</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="op">~</span><span class="op">{</span>
    <span class="va">id_number</span> <span class="op">&lt;-</span> <span class="va">.x</span>
    <span class="va">g</span> <span class="op">&lt;-</span> <span class="va">temp_list</span><span class="op">[[</span><span class="va">.x</span><span class="op">]</span><span class="op">]</span>
    <span class="va">embeddings_data</span> <span class="op">&lt;-</span><span class="va">g</span><span class="op">%&gt;%</span>
      <span class="co">#k has already been generated by the generate_peels_network function </span>
      <span class="fu"><a href="../reference/prepare_SETSe_binary.html">prepare_SETSe_binary</a></span><span class="op">(</span><span class="va">.</span>, node_names <span class="op">=</span> <span class="st">"name"</span>, k <span class="op">=</span> <span class="cn">NULL</span>, 
                     force_var <span class="op">=</span> <span class="st">"class"</span>, 
                     positive_value <span class="op">=</span> <span class="st">"A"</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="../reference/SETSe_auto.html">SETSe_auto</a></span><span class="op">(</span>tol <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/vertex_attr.html">vertex_attr</a></span><span class="op">(</span><span class="va">.</span>, <span class="st">"force"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fl">10000</span><span class="op">)</span> 
    <span class="co">#create the aggregated node details</span>
    <span class="co">#embeddings_data$node_details &lt;- create_node_details(g, embeddings_data)</span>
    <span class="va">embeddings_data</span><span class="op">$</span><span class="va">node_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_node_edge_df.html">create_node_edge_df</a></span><span class="op">(</span> <span class="va">embeddings_data</span><span class="op">)</span>
    
    <span class="va">element_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">embeddings_data</span><span class="op">)</span>
    <span class="co">#add the id data onto each df in the list</span>
    <span class="va">embeddings_data</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">embeddings_data</span><span class="op">)</span> <span class="op">%&gt;%</span>
      <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="op">~</span><span class="va">embeddings_data</span><span class="op">[[</span><span class="va">.x</span><span class="op">]</span><span class="op">]</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="va">node_type</span>,
                         id <span class="op">=</span> <span class="va">id_number</span><span class="op">)</span><span class="op">)</span>
    
    <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">embeddings_data</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">element_names</span>
    
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">embeddings_data</span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>

<span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span>
  
<span class="op">}</span><span class="op">)</span>

<span class="co">#the list of embedding networks is then transposed and all the dataframes </span>
<span class="co">#representing the networks are made into a list of 5 dataframes using bind_rows</span>
<span class="va">all_embeddings</span> <span class="op">&lt;-</span><span class="va">all_embeddings</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/flatten.html">flatten</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/transpose.html">transpose</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">bind_rows</span><span class="op">)</span></pre></div>
</div>
<div id="aggregate-to-graph-level-and-plot" class="section level1">
<h1 class="hasAnchor">
<a href="#aggregate-to-graph-level-and-plot" class="anchor"></a>Aggregate to graph level and plot</h1>
<p>aggregate the node level deatils up to whole graph level and plot the results</p>
<div class="sourceCode" id="cb5"><pre class="downlit">



<span class="va">all_embeddings</span><span class="op">$</span><span class="va">node_details</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">type</span>, <span class="va">id</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_tension <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">tension_mean</span><span class="op">)</span>,
            elevation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">elevation</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mean_tension</span>, y <span class="op">=</span> <span class="va">elevation</span> , colour <span class="op">=</span> <span class="va">type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></pre></div>
<p><img src="separate-peels-quintet_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>We can see that the networks in peels quintet are clearly distinguishable using SETSe.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jonathan Bourne.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
